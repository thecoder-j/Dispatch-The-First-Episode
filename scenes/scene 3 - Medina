#include <iostream>
#include <unistd.h> // usleep
using namespace std;

/* ---------- Typing Effects ---------- */

// Word-by-word (dialogue / narration)
void typeWords(const string& text) {
    string word = "";
    for (char c : text) {
        if (c == ' ') {
            cout << word << " ";
            cout.flush();
            usleep(90000);
            word = "";
        } else {
            word += c;
        }
    }
    cout << word << endl;
    usleep(90000);
}

// Character-by-character (thoughts / emphasis)
void typeChars(const string& text) {
    for (char c : text) {
        cout << c;
        cout.flush();
        usleep(30000);
    }
    cout << endl;
}

/* ---------- Global Variable ---------- */
int Blazer_Impression_Score = 0;

/* ---------- Scene 3 ---------- */
void scene_bar_flambae() {
    int choice;

    cout << "\n--- Scene 3: Bar Flambae ---\n\n";

    typeWords("The bar is packed with off duty heroes and half broken furniture.");
    typeWords("Music thumps but the air suddenly heats up.");
    typeWords("Flambae stands near the counter flames licking his hands.");

    typeChars("This is already unstable.");

    cout << "(ðŸ”¥à² _à² ) *fwoosh*\n";
    usleep(200000);

    typeWords("People shout and scatter as the fire grows.");

    cout << "\nChoose your action:\n";
    cout << "1. Throw Water\n";
    cout << "2. Throw Alcohol\n";
    cout << "Choice: ";
    cin >> choice;

    if (choice == 1) {
        typeWords("You grab the nearest bucket of water.");

        cout << "(â•¯Â°â–¡Â°ï¼‰â•¯ï¸µ ðŸ’§\n";
        usleep(200000);

        typeWords("The flames hiss violently and die down.");
        typeWords("Flambae screams as the heat collapses inward.");

        cout << "(Ã—_Ã—) *steam rises*\n";
        usleep(200000);

        typeWords("The bar smells like smoke and regret.");
        typeWords("Witnesses look shaken but relieved.");

        Blazer_Impression_Score += 1;
    }
    else if (choice == 2) {
        typeWords("You reach for a bottle behind the bar.");

        cout << "(à¸‡ðŸ”¥_ðŸ”¥)à¸‡ *glass shatters*\n";
        usleep(200000);

        typeWords("Alcohol splashes across the flames.");

        cout << "(ðŸ”¥ðŸ”¥ðŸ”¥) *WHOOM*\n";
        usleep(200000);

        typeWords("Fire erupts toward the ceiling.");
        typeWords("People scream and dive for cover.");

        typeChars("That was loud.");

        typeWords("The moment burns itself into everyone's memory.");

        Blazer_Impression_Score += 3;
    }
    else {
        typeWords("You freeze.");
        typeWords("Security rushes in as the situation spirals.");
    }

    cout << "\n[Blazer Impression Score: " << Blazer_Impression_Score << "]\n";
}

/* ---------- Main (Standalone Testing) ---------- */
int main() {
    scene_bar_flambae();
    return 0;
}
