#include <iostream>
#include <chrono>
#include <thread>
#include <string>
#include <limits>

using namespace std;

// -------------------- Helper Functions --------------------
void wordByWord(const string &text, int speedMs = 50)
{
    string word;
    for (size_t i = 0; i < text.size(); ++i)
    {
        cout << text[i];
        if (text[i] == ' ' || i == text.size() - 1)
            cout.flush();
        this_thread::sleep_for(chrono::milliseconds(speedMs));
    }
    cout << endl;
}

void lineByLine(const string &line, int delayMs = 1000)
{
    cout << line << endl;
    this_thread::sleep_for(chrono::milliseconds(delayMs));
}

int readChoice()
{
    int choice;
    while (true)
    {
        if (cin >> choice)
            return choice;
        cin.clear();
        cin.ignore(numeric_limits<streamsize>::max(), '\n');
        cout << "Please enter a valid number: ";
    }
}

// -------------------- Scene 4 Function --------------------
void bar_flambae()
{
    lineByLine("┌── Bar Scene ──┐");
    wordByWord("Blonde Blazer: I gotta say blazer that does sound intriguing-");
    wordByWord("Mecha Man: That's actually-");
    lineByLine("(*ﾟ▽ﾟ*) ─ Spits drink on Blazer ─");
    wordByWord("Blonde Blazer: Not water...");
    wordByWord("Mecha Man: This is like pure alcohol?!");
    wordByWord("Blonde Blazer: Well it is actually *Wipes face");
    wordByWord("Mecha Man: You drink hard liquor from a pint glass?");
    wordByWord("Blonde Blazer: I actually drink straight from the glass");
    wordByWord("Blonde Blazer: I'm gonna go clean up");
    wordByWord("Mecha Man: I'm so sorry");
    wordByWord("Blonde Blazer: I will be right back");
    lineByLine("(⊙_⊙) ─ Blazer stands up and goes to the restroom ─");
    lineByLine("ヽ(｀⌒´)ノ ─ A guy screams from across the room ─");
    wordByWord("Flambae: [Distant scream] Hey! Bitch!");
    lineByLine("└─ Mecha Man looks ─");
    wordByWord("Flambae: I'm talking to you, bitch!");
    wordByWord("Mecha Man: I turned around because someone screamed, not cause I'm a bitch or anything");
    wordByWord("Flambae: Last time I checked this is a bar for superheroes");
    wordByWord("Mecha Man: No way! Is that your SuperPower? telling people obvious shit?");
    lineByLine("(¬_¬) ─ Coupe snickers ─");
    wordByWord("Mecha Man: Are you the villain I just messed up a couple of years ago?");
    wordByWord("Flambae: I am not a villain, I am Flambae, a superhero.");
    wordByWord("Flambae: Now Mecha Dick get the fuck out of here cause you're not a superhero anymore");
    wordByWord("Flambae: We can do this the easy way or the hard w-");

    lineByLine("THROW WATER [1]  THROW ALCOHOL [2]");
    cout << "Choose (1-2): ";
    int choice = readChoice();

    if (choice == 1)
    {
        lineByLine("(>_<) ─ Throws water on Flambae ─");
        lineByLine("(o_o) ─ Flames get put out ─");
        wordByWord("Mecha Man: There, easy way");
        lineByLine("(¬_¬) ─ Flambae visibly gets irritated ─");
        wordByWord("Mecha Man: Are you gonna punch me now?");
        lineByLine("(>_<) ─ Flambae rushes towards Mecha Man ─");
        lineByLine("(>_<) ─ Slides on water and brakes teeth on the Bar counter ─");
    }
    else
    {
        lineByLine("(>_<) ─ Throws alcohol on Flambae ─");
        lineByLine("(火o火) ─ Flambae's hair catches on fire ─");
        wordByWord("Mecha Man: Sorry, Which way was that?");
        lineByLine("(⊙_⊙) ─ Flambae runs outside while burning ─");
    }
}

// -------------------- Main --------------------
int main()
{
    bar_flambae();  // Run Scene 4
    return 0;
}
