#include <iostream>
#include <unistd.h>
using namespace std;

/* ---------- Typing Effects ---------- */

// WORD-by-word (dialogue)
void typeWords(string text, int delay = 80000) {
    string word = "";
    for (char c : text) {
        if (c == ' ') {
            cout << word << " ";
            cout.flush();
            usleep(delay);
            word = "";
        } else {
            word += c;
        }
    }
    cout << word << endl;
    usleep(delay);
}

// LINE-by-line (actions)
void typeLine(string text, int delay = 200000) {
    cout << text << endl;
    usleep(delay);
}

/* ---------- Scene 4 ---------- */
void scene_billboard(int &impressionScore, int &publicChaos) {
    int choice;

    cout << "\n===== Scene 4: Billboard =====\n\n";

    typeLine("*Mecha Man flies to the alleyway*");    
    typeLine("*Blonde Blazer walks out of the bar*");
    typeWords("Blonde Blazer: Hey, I couldn't find you.");
    typeWords("Mecha Man: Uh, it's cool, I was just admiring the art on this dumpster.");
    typeWords("Can't tell why anyone would put those words together.");    
    typeLine("*Shows a dumpster with 'FART BART' plastered on it*");
    typeWords("Mecha Man: Why're you holding two drinks?");
    typeWords("Blonde Blazer: Nightcap?");
    typeWords("Mecha Man: You're trouble.");
    typeWords("Blonde Blazer: Actually, according to the bartender, that's exactly what you are.");
    typeWords("What happened in there?");
    typeWords("I walk out and the bartender's pissed.");
    typeWords("The whole energy is awkward...");
    typeWords("...And why did it smell like burnt hair?");
    typeWords("Mecha Man: I got a little fired up with the guy.");
    typeWords("But he ran off before anything happened.");
    typeWords("Blonde Blazer: Oh, you got fired up?");
    typeWords("Mecha Man: Yeah. Does that not sound convincing enough?");
    typeWords("Blonde Blazer: Hold these. I know a place.");
    typeWords("It's a little out there. Easier if we fly...");

    typeLine("*Mecha Man and Blonde Blazer land on the billboard*  (à¸‡â€¢Ì€_â€¢Ì)à¸‡");
    typeLine("*City lights glow beneath them*  âœ¨ðŸ™ï¸");

    typeWords("Robert: I actually thought you were taking us to sit on it.");
    typeWords("Blonde Blazer: Hmm! Oh yeah, that woulda been cool.");
    typeWords("But no, this is better cause you can see it.");
    typeWords("And it looks like there's a couple up there already.");

    cout << "\n1. I really needed this.";
    cout << "\n2. Thanks for helping me.";
    cout << "\n3. Sorry about the spit thing.";
    cout << "\nChoice: ";
    cin >> choice;

    switch(choice) {
        case 1:
            typeWords("Robert: All this has been pretty overwhelming, you know.");
            typeWords("I don't get out often, and I think I really needed this.");
            typeWords("So thank you. For bringing me out.");
            typeWords("I had a really great time.");
            impressionScore += 5;
            break;
        case 2:
            typeWords("Robert: I really appreciate you coming to my rescue back there.");
            typeWords("I still think I could've handled it, but...");
            typeWords("Thanks. I should've just said that.");
            typeWords("But yep. I'm still talking.");
            impressionScore += 3;
            break;
        case 3:
            typeWords("Robert: I know I shouldn't bring it up.");
            typeWords("But I am seriously sorry about the whole spitting thing.");
            typeWords("Blonde Blazer: Yeah, that's usually like a second date kinda thing with me.");
            typeWords("I'm joking. I'm joking.");
            typeWords("This is not a date.");
            typeWords("Robert: No. Totally. Yeah.");
            impressionScore -= 2;
            break;
        default:
            typeWords("Robert: Yeah... ignore that.");
            break;
    }

    typeWords("Blonde Blazer: Don't you worry about it, Robert Roberson.");
    typeWords("Robert: How do you know my name?");
    typeWords("Blonde Blazer: Whoops!");
    typeWords("Robert: What's going on?");
    typeWords("Blonde Blazer: Okay, I'll tell you.");
    typeWords("But only after you tell me how you ended up with a name like that.");

    typeWords("Robert: Oh, you mean a name like Robert Roberson the Third?");
    typeWords("Blonde Blazer: The Third?! Three times this happened?");

    typeWords("Robert: There was grandpa Bobby.");
    typeWords("Then my dad, who everyone called Robbie.");
    typeWords("Then me.");
    typeWords("Cause I wanted to be taken seriously.");

    typeWords("Blonde Blazer: A family tradition.");
    typeWords("Robert: In more ways than one.");

    typeWords("Robert: Gramps was the first Mecha Man.");
    typeWords("He died in the suit before I was born.");
    typeWords("Dad was killed fighting Shroud.");
    typeWords("That's when I took over.");
    typeWords("There was a little inheritance and the life insurance money.");

    typeWords("Blonde Blazer: I'm so sorry. I didn't realize.");
    typeWords("Robert: Just your run of the mill sad superhero origin story.");
    typeWords("The family tradition is dying in that suit.");
    typeWords("Which I guess I don't have to worry about anymore.");

    typeWords("Mecha Man: What is it?");
    typeWords("Blonde Blazer: I'm not quite drunk enough to share my origin story just yet.");
    typeWords("But... remind me to tell you someday.");
    typeWords("Robert: Definitely.");

    typeLine("*Blonde Blazer sits close to Robert*");
    typeLine("*She gently touches Robertâ€™s face*  (ã€ƒÏ‰ã€ƒ)");
    typeLine("*Blonde Blazer removes his mask*  ( ï¾‰ ï¾Ÿï½°ï¾Ÿ)ï¾‰");
    typeLine("*She looks intently into his eyes* (*â‰§ï¸¶â‰¦))(ï¿£â–½ï¿£* )ã‚ž");
    typeWords("Blonde Blazer: We can work with this.");

    cout << "\n1. Kiss her";
    cout << "\n2. Let the moment pass";
    cout << "\nChoice: ";
    cin >> choice;

    switch(choice) {
        case 1:
            typeLine("*You lean in and kiss her*  ( Ë˜ Â³Ë˜)â™¥");
            typeWords("Blonde Blazer: No.");
            typeWords("This... I'm sorry if I gave the wrong impression.");
            publicChaos += 1;
            break;
        case 2:
            typeLine("*You hesitate and pull back*  (â€¢_â€¢)");
            typeWords("Blonde Blazer: Sorry.");
            typeWords("I'm actually here with a purpose.");
            publicChaos -= 1;
            break;
        default:
            typeWords("Robert: Uh... yeah.");
            break;
    }

    typeWords("Robert: Oh no.");
    typeWords("Blonde Blazer: It's my fault.");
    typeWords("Robert: I'm so sorry, I totally misread that--");
    typeWords("Blonde Blazer: You didn't.");
    typeWords("I mean, you did, but...");
    typeWords("The way I went about tonight... it was all a little loose");
    typeWords("A little unprofessional...");

    typeWords("Robert: Unprofessional?");
    typeWords("I'm not sure that applies but... okay.");

    typeWords("Blonde Blazer: I'm actually here on official business...");
    typeWords("... how I know your name, the proposition I mentioned right before you spit in my mouth--");
    typeWords("Robert: Still mortified about that.");
    typeWords("Blonde Blazer: It's fine.");
    typeWords("Do you remember a superhero named Trackstar?");
    typeWords("Robert: Remember? Of course. He's like family that I haven't talked to in a while.");
    typeWords("What about him?");
    typeWords("Blonde Blazer: I work with him at SDN.");
    typeWords("He recommended you. Mentioned that he worked with your father.");
    typeWords("Robert: Yeah, he was the youngest member of the Brave Brigade, so he was kind of my babysitter for a while.");
    typeWords("How's he doing?");
    typeWords("Blonde Blazer: He's doing great. He's why I'm here.");
    typeWords("Blonde Blazer: Robert, I would like to make you an offer.");
    typeWords("Blonde Blazer: In exchange for dispatching and mentoring some of our rookie heroes, SDN can make you Mecha Man again.");
    typeWords("Blonde Blazer: But this time with all the resources that a company as big as ours has at their disposal.");
    typeWords("Blonde Blazer: No more paying out of pocket for repairs, support staff, the whole shebang.");

    typeWords("Robert: My suit was totally destroyed...");
    typeWords("Blonde Blazer: I saw the report, studied the footage.");
    typeWords("Blonde Blazer: It's not totally destroyed, just mostly.");
    typeWords("Blonde Blazer: It's a big investment. It'll take considerable time and money to get the suit repaired and the missing pieces replaced.");
    typeWords("Blonde Blazer: Plenty of time to learn how to dispatch and level up some of the heroes on our roster.");
    typeWords("Blonde Blazer: Your experience, your work ethic, your perspective, it's all invaluable.");
    typeWords("Blonde Blazer: Share it, Robert. You have a lot left to give.");

    cout << "\n===== End of Scene 4 =====\n";
}

/* ---------- Standalone Main ---------- */
int main() {
    int impressionScore = 0;
    int publicChaos = 0;

    scene_billboard(impressionScore, publicChaos);

    cout << "\nImpression Score: " << impressionScore << endl;
    cout << "Public Chaos: " << publicChaos << endl;

    return 0;
}
